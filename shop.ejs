<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CraftWonders | Shop</title>
    <link rel="stylesheet"  href="stylee.css">

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Madimi+One&display=swap" rel="stylesheet"/>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
    href="https://fonts.googleapis.com/css2?family=Madimi+One&family=Mirza:wght@400;500;600;700&display=swap"
    rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
    href="https://fonts.googleapis.com/css2?family=Madimi+One&family=Mirza:wght@400;500;600;700&family=Tienne:wght@400;700;900&display=swap"
    rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
    href="https://fonts.googleapis.com/css2?family=Madimi+One&family=Mirza:wght@400;500;600;700&family=Ruthie&family=Tienne:wght@400;700;900&display=swap"
    rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&family=Single+Day&display=swap" rel="stylesheet">
    <style>
        .top{
            display: flex;
            width: 100%;
            height: 60px;
            align-items: center;
        }

        .tooltip {
        position: relative;
        display: inline-block;
        cursor: pointer;
    }

    .tooltip .tooltiptext {
        visibility: hidden;
        width: 120px;
        background-color: #555;
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 5px 0;
        position: absolute;
        margin-top:30px;
        bottom: 125%;
        left: 50%;
        margin-left: -60px;
        opacity: 0;
        top:30px;
        
            
    }

    .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
    }
        .name{
            font-size: 60px;
            color: rgb(0, 0, 0);
            font-family:'Raleway';
            color: white;
        }
        .body-img{
            background-image: url('https://www.gaurikohli.com/cdn/shop/articles/India_Handicraft_Exporters-A_6.jpg?v=1679305506&width=2560'); 
            background-size: cover; 
            background-position: center; 
            background-repeat: no-repeat; 
            background-color:black;
            height: 45vh; 
            margin: 3px; 
            padding: 0px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        .top ul{
            list-style: none;
            display: flex;
            width: 59%;
            align-items: center;
            padding: 20px;
            margin-left: 40px;
            
        }
        #title{
            font-size: 25px;
            margin-left: 10px;
        }

        .top p{
            font-family: "Madimi One", sans-serif;
            color: rgb(3, 107, 107);
            margin-right: 250px;
        }
        .top ul li{
            padding: 20px;
            margin-right: 0px;
            font-size: 20px;
        }
        .top ul li:hover{
            
            color:rgba(167, 93, 93, 0.89) ;
            cursor: pointer;
            scale: 1.08;
        }

        .buttons{
            position: flex-end;
            
            transition: all 0.2s;
        }
        .buttons button{
            border-radius: 50%;
            border: 1px solid b0px, serif;
        }
        .buttons input{
            display: none;
            width: 250px;
            height: 30px;
            border-radius: 3px;
            transition: all 0.2s ease;
        }
        .buttons img{
            border-radius: 50%;
            width: 20px;
            height: 20px;
        }
        .list{
            display: flex;
            flex-direction: row;
            column-gap: 2px;
            row-gap: 5px;
            align-items: flex-end;
            flex-wrap: wrap;
        }

        .item{
            display: flex;
            flex-direction: column;
            padding: 30px;
            width:300px;
            transition: box-shadow 0.35s;
                
        }
        .item:hover{
            box-shadow: 0 0px 6px rgba(45, 44, 44, 0.6); 
        }
        .item-img{
            justify-content: center; 
            align-items: center; 
            display: flex;
            height:175px;
            padding-bottom: 30px;
        }
        .item-name{
            font-size: 18px;
            font-family: 'RALEWAY';
        }
        .item-type{
            font-size: 16px;
            padding-top: 3px;
            font-family: 'RALEWAY';
        }

        .item-price{
            font-size: 18px;
            font-family: 'RALEWAY';
            padding-bottom: 9px;
            padding-top:7px;
            
        }
        .add-to-cart{
            background-color: rgba(184, 121, 108, 0.827);
            font-family: 'RALEWAY';
            color: white;
            font-size: 20px;
            border: none;
            align-items: center;
            transition: background-color 0.1s;
        }
        .add-to-cart:hover{
            background-color: rgba(157, 132, 126, 0.827);
            
        }
        .selection{
            width: 300px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
            margin-right: 15px;
            
        }
        .selection ul li{
            list-style: none;
            padding: 20px;
            padding-left: 0px;
            padding-top: 0px;
            margin: 10px;
            margin-top: 0px;
            font-size: 20px;
            transition: color 0.3s;

        }
        .selection ul li a{
            color: inherit;
            text-decoration: none;
        }
        .selection ul li:hover{
            color: rgb(184, 119, 119);
            text-decoration: underline;
        }
        ul {
            display: inline-block;
            padding-inline-start: 0px;
        }

        .filter-condition{
            padding: 5px;
            height: 300px;
            font-size: 20px;
            font-family: 'RALEWAY';
            

            margin: 0px;
        }
            
        .filter-condition select{
            width: 300px;
            color: rgb(0, 0, 0);
            background: transparent;
            cursor: pointer;
            font-size: 15px;
            font-family: 'RALEWAY';
        }
        .indicator{
            font-family: 'RALEWAY';
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            width: 0;
            justify-content: flex-start;
            
            
        }
        .selection-heading{
            font-family: 'RALEWAY';
            font-weight: bold;
            font-size: 22px;
            padding: 20px;
            padding-left: 0px;
            padding-bottom: 0px;
            margin: 10px;
            margin-bottom: 2px;
            border-bottom: 1.5px solid rgb(103, 102, 102);
            
        }
        .item-area{
            display: flex;
            flex-direction: row;
            column-gap: 10px;
            margin-left: 40px;
            margin-right: 40px;
            margin-top: 40px;
        }
    </style>
    
</head>
<body>
    
    <%- include('./partials/nav.ejs',{cartItems:cartItems}) %>
   
    <div class="body-img">
        <div class="name">Products</div>
    </div>
    <div class="item-area">
        <div class="selection">
            <p class="selection-heading">PRODUCT CATEGORIES</p>
            <ul class="indicator">
                <li data-filter="all" class="active"><a href="#">All</a></li>
                <% array2.forEach(b => { %>
                    <li data-filter="<%= b %>"><a href="#"><%= b %></a></li>
                <% }); %>
            </ul>
            
        </div>
        
        <div class="list-div">
            <ul class="list">
                <% items.forEach(x => { %>
                    <li class="item">
                        <div class="item-img">
                            <img src="<%= x.itemImg %>" style="height: 100%; align-items: center;">
                        </div>
                        <div class="item-name"><%= x.itemName %></div>
                        <div class="item-type"><%= x.itemType %></div>
                        <div class="item-price">$<%= x.itemPrice %></div>
                        <form action="../shop" method="POST">
                            <input type="hidden" value="<%= JSON.stringify(x)%>" name="productItem">
                            <center><button class="add-to-cart" type="submit">Add to cart</button></center>
                        </form>
                        
                    </li>
                <% }); %>
            </ul>
        </div>
        
        
    </div>
  


    <script>
       
        document.addEventListener('DOMContentLoaded', function() {
            (function() {
            
            let field = document.querySelector('.list');
            let li = Array.from(field.children);
        
            function FilterProduct() {
                for(let i of li){
                    const name = i.querySelector('.item-type');
                    const x = name.textContent;
                    i.setAttribute("data-category", x);
                }
        
                let indicator = document.querySelector('.indicator').children;
        
                this.run = function() {
                    for(let i=0; i<indicator.length; i++)
                    {
                        indicator[i].onclick = function () {
                            for(let x=0; x<indicator.length; x++)
                            {
                                indicator[x].classList.remove('active');
                            }
                            this.classList.add('active');
                            const displayItems = this.getAttribute('data-filter');
        
                            for(let z=0; z<li.length; z++)
                            {
                                li[z].style.transform = "scale(0)";
                                setTimeout(()=>{
                                    li[z].style.display = "none";
                                }, 500);
        
                                if ((li[z].getAttribute('data-category') == displayItems) || displayItems == "all")
                                {
                                    li[z].style.transform = "scale(1)";
                                    setTimeout(()=>{
                                        li[z].style.display = "block";
                                    }, 500);
                                }
                            }
                        };
                    }
                }
            }
            function SortProduct() {
                let select = document.getElementById('select');
                let ar = [];
                for (let i of li) {
                    const priceElement = i.querySelector('.item-price');
                    const price = Number(priceElement.textContent.trim());
                    i.setAttribute("item-price", price);
                    ar.push(i);
                }
                this.run = () => {
                    addevent();
                }
                function addevent() {
                    select.onchange = sortingValue;
                }
                function sortingValue() {
                    if (this.value === 'Default') {
                        while (field.firstChild) { field.removeChild(field.firstChild); }
                        field.append(...ar);
                    }
                    if (this.value === 'LowToHigh') {
                        SortElem(field, li, true)
                    }
                    if (this.value === 'HighToLow') {
                        SortElem(field, li, false)
                    }
                }
                function SortElem(field, li, asc) {
                    let dm = asc ? 1 : -1;
                    sortli = li.slice().sort((a, b) => {
                        const priceA = Number(a.getAttribute('item-price'));
                        const priceB = Number(b.getAttribute('item-price'));
                        return priceA > priceB ? dm : -dm;
                    });
                    while (field.firstChild) { field.removeChild(field.firstChild); }
                    field.append(...sortli);
                    new FilterProduct().run();

                }
            }

            new FilterProduct().run();
            new SortProduct().run();

        })();
    });
    </script>
  
  
  
</body>
</html>